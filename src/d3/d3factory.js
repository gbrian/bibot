var d3 = require('d3');
var jsdom = require('jsdom');

var demoData = '[{"id":"10097071","case":"HY285524","date":"2015-06-02T19:41:19.000Z"},{"id":"21907","case":"HY291065","date":"2015-06-07T01:50:00.000Z"},{"id":"21908","case":"HY291065","date":"2015-06-07T01:50:00.000Z"},{"id":"10156667","case":"HY345298","date":"2015-07-18T01:17:00.000Z"},{"id":"10244875","case":"HY433114","date":"2015-09-21T22:50:00.000Z"},{"id":"22430","case":"HY551683","date":"2015-12-27T13:05:00.000Z"},{"id":"10047709","case":"HY237154","date":"2015-04-26T19:58:36.000Z"},{"id":"22335","case":"HY346207","date":"2015-07-04T14:00:00.000Z"},{"id":"22336","case":"HY346207","date":"2015-07-04T14:00:00.000Z"},{"id":"22337","case":"HY346207","date":"2015-07-04T14:00:00.000Z"},{"id":"22338","case":"HZ148668","date":"2015-12-10T16:30:00.000Z"},{"id":"22362","case":"HY392281","date":"2015-09-04T14:09:00.000Z"},{"id":"22387","case":"HY471497","date":"2015-10-23T13:42:00.000Z"},{"id":"22407","case":"HY471252","date":"2015-10-23T12:01:00.000Z"},{"id":"21714","case":"HY102349","date":"2015-01-03T04:50:00.000Z"},{"id":"21715","case":"HY105400","date":"2015-01-05T21:11:00.000Z"},{"id":"21716","case":"HY105478","date":"2015-01-05T23:49:00.000Z"},{"id":"21717","case":"HY106072","date":"2015-01-06T14:38:00.000Z"},{"id":"21718","case":"HY106072","date":"2015-01-06T16:53:00.000Z"},{"id":"21719","case":"HY108387","date":"2015-01-08T20:30:00.000Z"},{"id":"21721","case":"HY109537","date":"2015-01-09T23:25:00.000Z"},{"id":"21722","case":"HY106555","date":"2015-01-09T15:20:00.000Z"},{"id":"21723","case":"HY114053","date":"2015-01-13T21:10:00.000Z"},{"id":"21724","case":"HY113713","date":"2015-01-13T16:40:00.000Z"},{"id":"21725","case":"HY115036","date":"2015-01-14T16:22:00.000Z"},{"id":"21727","case":"HY117698","date":"2015-01-16T18:22:00.000Z"},{"id":"21728","case":"HY118469","date":"2015-01-17T12:26:00.000Z"},{"id":"21729","case":"HY118913","date":"2015-01-17T18:10:00.000Z"},{"id":"21730","case":"HY119535","date":"2015-01-18T11:20:00.000Z"},{"id":"21731","case":"HY121768","date":"2015-01-20T09:44:00.000Z"},{"id":"21732","case":"HY122767","date":"2015-01-20T23:42:00.000Z"},{"id":"21733","case":"HY122962","date":"2015-01-21T08:25:00.000Z"},{"id":"21734","case":"HY123702","date":"2015-01-21T18:39:00.000Z"},{"id":"21735","case":"HY126186","date":"2015-01-23T18:25:00.000Z"},{"id":"21736","case":"HY126149","date":"2015-01-23T19:18:00.000Z"},{"id":"21737","case":"HY126583","date":"2015-01-24T01:13:00.000Z"},{"id":"21738","case":"HY128133","date":"2015-01-27T10:54:00.000Z"},{"id":"21739","case":"HY130523","date":"2015-01-27T20:00:00.000Z"},{"id":"21741","case":"HY132431","date":"2015-01-29T01:06:00.000Z"},{"id":"21742","case":"HY132441","date":"2015-01-29T02:20:00.000Z"},{"id":"21743","case":"HY134398","date":"2015-01-30T16:52:00.000Z"},{"id":"21744","case":"HY135181","date":"2015-01-31T11:02:00.000Z"},{"id":"21745","case":"HY136615","date":"2015-02-01T19:53:00.000Z"},{"id":"21746","case":"HY136871","date":"2015-02-02T08:16:00.000Z"},{"id":"21748","case":"HY139558","date":"2015-02-04T15:07:00.000Z"},{"id":"21749","case":"HY126100","date":"2015-01-30T17:53:00.000Z"},{"id":"21750","case":"HY135441","date":"2015-02-02T22:33:00.000Z"},{"id":"21752","case":"HY144738","date":"2015-02-08T22:26:00.000Z"},{"id":"21753","case":"HY146099","date":"2015-02-09T20:31:00.000Z"},{"id":"21755","case":"HY144198","date":"2015-02-08T11:15:00.000Z"},{"id":"21756","case":"HY146134","date":"2015-02-09T20:56:00.000Z"},{"id":"21757","case":"HY145267","date":"2015-02-09T10:10:00.000Z"},{"id":"21758","case":"HY147395","date":"2015-02-10T21:25:00.000Z"},{"id":"21759","case":"HY152127","date":"2015-02-15T03:21:00.000Z"},{"id":"21760","case":"HK649858","date":"2015-02-09T23:00:00.000Z"},{"id":"21761","case":"HY157257","date":"2015-02-20T02:17:00.000Z"},{"id":"21762","case":"HY158116","date":"2015-02-20T17:41:00.000Z"},{"id":"21763","case":"HY159217","date":"2015-02-21T16:44:00.000Z"},{"id":"21764","case":"HY160139","date":"2015-02-22T14:20:00.000Z"},{"id":"21765","case":"HY163030","date":"2015-02-25T05:37:00.000Z"},{"id":"21767","case":"HY163914","date":"2015-02-25T18:45:00.000Z"},{"id":"21768","case":"HY163571","date":"2015-02-25T14:09:00.000Z"},{"id":"21769","case":"HY169646","date":"2015-03-02T18:20:00.000Z"},{"id":"21772","case":"HY174696","date":"2015-03-07T00:52:00.000Z"},{"id":"21773","case":"HY174696","date":"2015-03-07T00:52:00.000Z"},{"id":"21774","case":"HY175374","date":"2015-03-07T15:41:00.000Z"},{"id":"21775","case":"HY176662","date":"2015-03-08T17:33:00.000Z"},{"id":"21776","case":"HY177178","date":"2015-03-09T08:36:00.000Z"},{"id":"21777","case":"HY177586","date":"2015-03-09T13:52:00.000Z"},{"id":"21778","case":"HY177958","date":"2015-03-09T18:41:00.000Z"},{"id":"21779","case":"HY178055","date":"2015-03-09T18:53:00.000Z"},{"id":"21780","case":"HY185125","date":"2015-03-15T03:49:00.000Z"},{"id":"21781","case":"HY185434","date":"2015-03-15T12:21:00.000Z"},{"id":"21782","case":"HY185689","date":"2015-03-15T18:27:00.000Z"},{"id":"21783","case":"HY185689","date":"2015-03-15T18:28:00.000Z"},{"id":"21784","case":"HY186207","date":"2015-03-16T02:11:00.000Z"},{"id":"21785","case":"HY186207","date":"2015-03-16T02:11:00.000Z"},{"id":"21786","case":"HY190080","date":"2015-03-18T23:49:00.000Z"},{"id":"21787","case":"HY190108","date":"2015-03-19T01:26:00.000Z"},{"id":"21788","case":"HY190397","date":"2015-03-19T10:20:00.000Z"},{"id":"21789","case":"HY191107","date":"2015-03-19T20:19:00.000Z"},{"id":"21790","case":"HY192076","date":"2015-03-20T16:14:00.000Z"},{"id":"21791","case":"HY193065","date":"2015-03-21T11:32:00.000Z"},{"id":"21792","case":"HY193536","date":"2015-03-22T08:53:00.000Z"},{"id":"21793","case":"HY194555","date":"2015-03-22T20:33:00.000Z"},{"id":"21794","case":"HY196184","date":"2015-03-24T05:55:00.000Z"},{"id":"21795","case":"HY198255","date":"2015-03-25T17:24:00.000Z"},{"id":"21796","case":"HY199452","date":"2015-03-26T16:59:00.000Z"},{"id":"21797","case":"HY199846","date":"2015-03-27T01:04:00.000Z"},{"id":"21798","case":"HY201146","date":"2015-03-28T01:13:00.000Z"},{"id":"21799","case":"HY202270","date":"2015-03-29T01:27:00.000Z"},{"id":"21800","case":"HY203776","date":"2015-03-30T12:50:00.000Z"},{"id":"21801","case":"HY204746","date":"2015-03-31T08:55:00.000Z"},{"id":"21802","case":"HY204877","date":"2015-03-31T10:19:00.000Z"},{"id":"21803","case":"HY206710","date":"2015-04-01T17:05:00.000Z"},{"id":"21804","case":"HY207131","date":"2015-04-01T22:51:00.000Z"},{"id":"21805","case":"HY207153","date":"2015-04-02T00:26:00.000Z"},{"id":"21806","case":"HY208263","date":"2015-04-02T19:08:00.000Z"},{"id":"21807","case":"HY208837","date":"2015-04-03T10:08:00.000Z"},{"id":"21808","case":"HY209027","date":"2015-04-03T12:37:00.000Z"},{"id":"21809","case":"HY210099","date":"2015-04-04T10:18:00.000Z"},{"id":"21810","case":"HY210359","date":"2015-04-04T15:07:00.000Z"},{"id":"21811","case":"HY214108","date":"2015-04-08T00:53:00.000Z"},{"id":"21812","case":"HY214352","date":"2015-04-08T09:37:00.000Z"},{"id":"21813","case":"HY214581","date":"2015-04-08T12:25:00.000Z"},{"id":"21814","case":"HY217489","date":"2015-04-10T21:16:00.000Z"},{"id":"21815","case":"HY218517","date":"2015-04-11T19:27:00.000Z"},{"id":"21817","case":"HY201343","date":"2015-04-03T05:00:00.000Z"},{"id":"21818","case":"HY132431","date":"2015-02-05T06:00:00.000Z"},{"id":"21819","case":"HY222476","date":"2015-04-15T01:16:00.000Z"},{"id":"21820","case":"HY226249","date":"2015-04-17T22:55:00.000Z"},{"id":"21821","case":"HY226327","date":"2015-04-17T23:22:00.000Z"},{"id":"21822","case":"HY227673","date":"2015-04-19T03:38:00.000Z"},{"id":"21823","case":"HY227705","date":"2015-04-19T04:35:00.000Z"},{"id":"21824","case":"HY227705","date":"2015-04-19T04:35:00.000Z"},{"id":"21825","case":"HY229848","date":"2015-04-20T20:17:00.000Z"},{"id":"21826","case":"HY229305","date":"2015-04-20T13:54:00.000Z"},{"id":"21827","case":"HY229969","date":"2015-04-21T00:35:00.000Z"},{"id":"21828","case":"HY231077","date":"2015-04-21T20:11:00.000Z"},{"id":"21829","case":"HY230461","date":"2015-04-21T11:49:00.000Z"},{"id":"21830","case":"HY233228","date":"2015-04-23T16:10:00.000Z"},{"id":"21831","case":"HY233901","date":"2015-04-24T08:20:00.000Z"},{"id":"21832","case":"HY234893","date":"2015-04-24T21:21:00.000Z"},{"id":"21833","case":"HY234991","date":"2015-04-25T00:26:00.000Z"},{"id":"21835","case":"HY236576","date":"2015-04-26T11:15:00.000Z"},{"id":"21836","case":"HY239281","date":"2015-04-28T13:30:00.000Z"},{"id":"21839","case":"HY240475","date":"2015-04-29T12:01:00.000Z"},{"id":"21840","case":"HY240344","date":"2015-04-29T10:45:00.000Z"},{"id":"21842","case":"HY241278","date":"2015-04-30T05:37:00.000Z"},{"id":"21843","case":"HY242429","date":"2015-04-30T22:44:00.000Z"},{"id":"21844","case":"HY243252","date":"2015-05-01T16:15:00.000Z"},{"id":"21845","case":"HY243592","date":"2015-05-01T21:30:00.000Z"},{"id":"21846","case":"HY243229","date":"2015-05-01T15:14:00.000Z"},{"id":"21848","case":"HY243229","date":"2015-05-01T15:34:00.000Z"},{"id":"21849","case":"HY244929","date":"2015-05-02T23:05:00.000Z"},{"id":"21852","case":"HY248286","date":"2015-05-05T14:49:00.000Z"},{"id":"21853","case":"HY251159","date":"2015-05-07T18:15:00.000Z"},{"id":"21854","case":"HY253376","date":"2015-05-09T11:22:00.000Z"},{"id":"21855","case":"HY254085","date":"2015-05-09T22:35:00.000Z"},{"id":"21856","case":"HY250608","date":"2015-05-07T11:04:00.000Z"},{"id":"21857","case":"HY213507","date":"2015-05-10T05:00:00.000Z"},{"id":"21858","case":"HY254429","date":"2015-05-10T08:42:00.000Z"},{"id":"21860","case":"HY259141","date":"2015-05-13T18:05:00.000Z"},{"id":"21861","case":"HY259141","date":"2015-05-13T21:23:00.000Z"},{"id":"21862","case":"HY260356","date":"2015-05-14T17:24:00.000Z"},{"id":"21863","case":"HY262032","date":"2015-05-15T23:20:00.000Z"},{"id":"21866","case":"HY265180","date":"2015-05-18T10:16:00.000Z"},{"id":"21867","case":"HY267833","date":"2015-05-20T09:44:00.000Z"},{"id":"21868","case":"HY268571","date":"2015-05-20T18:12:00.000Z"},{"id":"21874","case":"HY267522","date":"2015-05-20T12:53:00.000Z"},{"id":"21875","case":"HY269141","date":"2015-05-21T10:12:00.000Z"},{"id":"21876","case":"HY271504","date":"2015-05-22T23:46:00.000Z"},{"id":"21877","case":"HY270036","date":"2015-05-22T15:33:00.000Z"},{"id":"21878","case":"HY271518","date":"2015-05-23T00:51:00.000Z"},{"id":"21879","case":"HY271945","date":"2015-05-23T11:15:00.000Z"},{"id":"21880","case":"HY272649","date":"2015-05-23T22:01:00.000Z"},{"id":"21881","case":"HY272708","date":"2015-05-23T22:48:00.000Z"},{"id":"21882","case":"HY272716","date":"2015-05-23T23:35:00.000Z"},{"id":"21883","case":"HY273328","date":"2015-05-24T15:25:00.000Z"},{"id":"21884","case":"HY273377","date":"2015-05-24T14:45:00.000Z"},{"id":"21885","case":"HY273621","date":"2015-05-24T18:20:00.000Z"},{"id":"21886","case":"HY274367","date":"2015-05-25T12:33:00.000Z"},{"id":"21887","case":"HY274555","date":"2015-05-25T17:46:00.000Z"},{"id":"21888","case":"HY274690","date":"2015-05-25T18:38:00.000Z"},{"id":"21889","case":"HY242453","date":"2015-05-23T16:19:00.000Z"},{"id":"21890","case":"HY278426","date":"2015-05-28T12:40:00.000Z"},{"id":"21891","case":"HY278426","date":"2015-05-28T12:40:00.000Z"},{"id":"21892","case":"HY279192","date":"2015-05-29T00:00:00.000Z"},{"id":"21893","case":"HY280615","date":"2015-05-30T00:04:00.000Z"},{"id":"21894","case":"HY280557","date":"2015-05-29T23:06:00.000Z"},{"id":"21895","case":"HY280528","date":"2015-05-29T23:41:00.000Z"},{"id":"21896","case":"HY282127","date":"2015-05-31T10:49:00.000Z"},{"id":"21897","case":"HY282612","date":"2015-05-31T17:48:00.000Z"},{"id":"21898","case":"HY282604","date":"2015-05-31T17:58:00.000Z"},{"id":"21899","case":"HY283497","date":"2015-06-01T13:00:00.000Z"},{"id":"21900","case":"HY280584","date":"2015-05-30T13:24:00.000Z"},{"id":"21901","case":"HY283451","date":"2015-06-02T12:29:00.000Z"},{"id":"21902","case":"HY286550","date":"2015-06-03T14:50:00.000Z"},{"id":"21903","case":"HY288244","date":"2015-06-04T20:31:00.000Z"},{"id":"21904","case":"HY289299","date":"2015-06-05T18:24:00.000Z"},{"id":"21905","case":"HY289570","date":"2015-06-05T21:27:00.000Z"},{"id":"21906","case":"HY289763","date":"2015-06-06T00:13:00.000Z"},{"id":"21909","case":"HY293164","date":"2015-06-08T17:52:00.000Z"},{"id":"21910","case":"HY294819","date":"2015-06-09T22:44:00.000Z"},{"id":"21911","case":"HY295935","date":"2015-06-10T18:35:00.000Z"},{"id":"21912","case":"HY295320","date":"2015-06-11T13:45:00.000Z"},{"id":"21913","case":"HY297544","date":"2015-06-11T22:45:00.000Z"},{"id":"21914","case":"HY297548","date":"2015-06-11T23:45:00.000Z"},{"id":"21915","case":"HY259141","date":"2015-06-09T22:01:00.000Z"},{"id":"21916","case":"HY297895","date":"2015-06-12T10:00:00.000Z"},{"id":"21917","case":"HY298981","date":"2015-06-13T03:48:00.000Z"},{"id":"21918","case":"HY300195","date":"2015-06-13T22:35:00.000Z"},{"id":"21923","case":"HY300040","date":"2015-06-13T22:05:00.000Z"},{"id":"21924","case":"HY283395","date":"2015-06-13T14:45:00.000Z"},{"id":"21925","case":"HY301340","date":"2015-06-14T20:16:00.000Z"},{"id":"21926","case":"HY301103","date":"2015-06-14T23:11:00.000Z"},{"id":"21927","case":"HY302907","date":"2015-06-16T02:31:00.000Z"},{"id":"21928","case":"HY304267","date":"2015-06-16T20:44:00.000Z"},{"id":"21929","case":"HY303888","date":"2015-06-16T16:12:00.000Z"},{"id":"21930","case":"HY305676","date":"2015-06-17T21:38:00.000Z"},{"id":"21931","case":"HY305722","date":"2015-06-17T22:24:00.000Z"},{"id":"21932","case":"HY306393","date":"2015-06-18T13:02:00.000Z"},{"id":"21933","case":"HY306882","date":"2015-06-18T20:33:00.000Z"},{"id":"21934","case":"HY306914","date":"2015-06-18T20:46:00.000Z"},{"id":"21935","case":"HY308808","date":"2015-06-20T10:02:00.000Z"},{"id":"21936","case":"HY309544","date":"2015-06-20T21:15:00.000Z"},{"id":"21937","case":"HY309931","date":"2015-06-21T08:10:00.000Z"},{"id":"21939","case":"HY312799","date":"2015-06-23T12:06:00.000Z"},{"id":"21940","case":"HY313340","date":"2015-06-23T18:57:00.000Z"},{"id":"21941","case":"HY313549","date":"2015-06-23T22:49:00.000Z"},{"id":"21942","case":"HY314835","date":"2015-06-24T22:35:00.000Z"},{"id":"21943","case":"HY315707","date":"2015-06-25T15:25:00.000Z"},{"id":"21944","case":"HY317686","date":"2015-06-27T02:08:00.000Z"},{"id":"21945","case":"HY318463","date":"2015-06-27T17:43:00.000Z"},{"id":"21946","case":"HY319421","date":"2015-06-28T12:38:00.000Z"},{"id":"21947","case":"HY317652","date":"2015-06-27T12:20:00.000Z"},{"id":"21948","case":"HY320151","date":"2015-06-29T02:11:00.000Z"},{"id":"21950","case":"HY321551","date":"2015-06-30T00:28:00.000Z"},{"id":"21951","case":"HY322797","date":"2015-06-30T21:38:00.000Z"},{"id":"21952","case":"HY324033","date":"2015-07-01T20:18:00.000Z"},{"id":"21953","case":"HY324513","date":"2015-07-02T17:30:00.000Z"},{"id":"21954","case":"HY325121","date":"2015-07-02T19:06:00.000Z"},{"id":"21955","case":"HY325525","date":"2015-07-02T23:20:00.000Z"},{"id":"21956","case":"HY325478","date":"2015-07-02T23:00:00.000Z"},{"id":"21957","case":"HY326221","date":"2015-07-03T15:31:00.000Z"},{"id":"21958","case":"HY327907","date":"2015-07-04T23:19:00.000Z"},{"id":"21959","case":"HY328200","date":"2015-07-05T05:00:00.000Z"},{"id":"21960","case":"HY328200","date":"2015-07-05T04:10:00.000Z"},{"id":"21961","case":"HY328047","date":"2015-07-05T02:04:00.000Z"},{"id":"21962","case":"HY328791","date":"2015-07-05T15:00:00.000Z"},{"id":"21963","case":"HY328164","date":"2015-07-05T03:00:00.000Z"},{"id":"21964","case":"HY327794","date":"2015-07-04T23:56:00.000Z"},{"id":"21965","case":"HY330255","date":"2015-07-06T15:32:00.000Z"},{"id":"21966","case":"HY330978","date":"2015-07-07T08:51:00.000Z"},{"id":"21967","case":"HY332064","date":"2015-07-08T01:09:00.000Z"},{"id":"21968","case":"HY332515","date":"2015-07-08T15:31:00.000Z"},{"id":"21969","case":"HY334393","date":"2015-07-09T19:58:00.000Z"},{"id":"21970","case":"HY334449","date":"2015-07-09T20:24:00.000Z"},{"id":"21971","case":"HY335770","date":"2015-07-10T21:55:00.000Z"},{"id":"21972","case":"HY335913","date":"2015-07-11T01:39:00.000Z"},{"id":"21973","case":"HY335962","date":"2015-07-11T01:30:00.000Z"},{"id":"21974","case":"HY336431","date":"2015-07-11T12:38:00.000Z"},{"id":"21975","case":"HY336496","date":"2015-07-11T12:38:00.000Z"},{"id":"21976","case":"HY337858","date":"2015-07-12T15:21:00.000Z"},{"id":"21977","case":"HY338482","date":"2015-07-13T02:58:00.000Z"},{"id":"21978","case":"HY342105","date":"2015-07-15T16:30:00.000Z"},{"id":"21979","case":"HY342285","date":"2015-07-15T19:00:00.000Z"},{"id":"21980","case":"HY342488","date":"2015-07-15T22:17:00.000Z"},{"id":"21982","case":"HY343941","date":"2015-07-17T02:43:00.000Z"},{"id":"21983","case":"HY344413","date":"2015-07-17T12:30:00.000Z"},{"id":"21984","case":"HY344710","date":"2015-07-17T15:23:00.000Z"},{"id":"21985","case":"HY344710","date":"2015-07-17T15:23:00.000Z"},{"id":"21988","case":"HY345202","date":"2015-07-17T23:20:00.000Z"},{"id":"21989","case":"HY345337","date":"2015-07-18T02:59:00.000Z"},{"id":"21990","case":"HY346232","date":"2015-07-18T22:01:00.000Z"},{"id":"21991","case":"HY348984","date":"2015-07-20T21:40:00.000Z"},{"id":"21992","case":"HY350286","date":"2015-07-21T19:39:00.000Z"},{"id":"21993","case":"HY354142","date":"2015-07-24T16:45:00.000Z"},{"id":"21994","case":"HY354568","date":"2015-07-24T22:47:00.000Z"},{"id":"21995","case":"HY355695","date":"2015-07-25T21:22:00.000Z"},{"id":"21996","case":"HY355926","date":"2015-07-26T00:34:00.000Z"},{"id":"21997","case":"HY355926","date":"2015-07-26T00:34:00.000Z"},{"id":"21998","case":"HY356151","date":"2015-07-26T08:14:00.000Z"},{"id":"21999","case":"HY356849","date":"2015-07-26T18:28:00.000Z"},{"id":"22001","case":"HY359179","date":"2015-07-28T12:58:00.000Z"},{"id":"22002","case":"HY346207","date":"2015-07-04T14:00:00.000Z"},{"id":"22006","case":"HY361399","date":"2015-07-30T02:00:00.000Z"},{"id":"22011","case":"HY362660","date":"2015-07-30T22:10:00.000Z"},{"id":"22012","case":"HY365437","date":"2015-08-01T23:38:00.000Z"},{"id":"22013","case":"HY365746","date":"2015-08-02T03:00:00.000Z"},{"id":"22014","case":"HY365558","date":"2015-08-02T07:40:00.000Z"},{"id":"22015","case":"HY281912","date":"2015-07-17T05:13:00.000Z"},{"id":"22016","case":"HY369622","date":"2015-08-05T04:55:00.000Z"},{"id":"22017","case":"HY370813","date":"2015-08-05T21:49:00.000Z"},{"id":"22018","case":"HY370898","date":"2015-08-06T00:29:00.000Z"},{"id":"22019","case":"HY335410","date":"2015-07-10T15:04:00.000Z"},{"id":"22020","case":"HY371882","date":"2015-08-06T16:52:00.000Z"},{"id":"22021","case":"HY371882","date":"2015-08-06T17:43:00.000Z"},{"id":"22022","case":"HY372265","date":"2015-08-07T00:42:00.000Z"},{"id":"22023","case":"HY373507","date":"2015-08-07T21:52:00.000Z"},{"id":"22024","case":"HY362815","date":"2015-08-02T22:01:00.000Z"},{"id":"22025","case":"HY364159","date":"2015-08-03T22:01:00.000Z"},{"id":"22026","case":"HY375951","date":"2015-08-09T21:26:00.000Z"},{"id":"22027","case":"HY374842","date":"2015-08-10T11:49:00.000Z"},{"id":"22028","case":"HY378773","date":"2015-08-11T21:33:00.000Z"},{"id":"22029","case":"HY380282","date":"2015-08-13T01:10:00.000Z"},{"id":"22030","case":"HY380866","date":"2015-08-13T13:42:00.000Z"},{"id":"22031","case":"HY382200","date":"2015-08-14T13:20:00.000Z"},{"id":"22032","case":"HY383014","date":"2015-08-15T00:37:00.000Z"},{"id":"22033","case":"HY382553","date":"2015-08-15T12:17:00.000Z"},{"id":"22034","case":"HY383024","date":"2015-08-15T01:05:00.000Z"},{"id":"22035","case":"HY384750","date":"2015-08-16T11:52:00.000Z"},{"id":"22036","case":"HY385366","date":"2015-08-16T20:26:00.000Z"},{"id":"22037","case":"HY386808","date":"2015-08-17T19:45:00.000Z"},{"id":"22038","case":"HY386779","date":"2015-08-17T19:59:00.000Z"},{"id":"22039","case":"HY385366","date":"2015-08-17T14:08:00.000Z"},{"id":"22040","case":"HY388840","date":"2015-08-19T12:09:00.000Z"},{"id":"22041","case":"HY389714","date":"2015-08-20T00:49:00.000Z"},{"id":"22042","case":"HY391099","date":"2015-08-21T00:36:00.000Z"},{"id":"22044","case":"HY392002","date":"2015-08-21T16:24:00.000Z"},{"id":"22045","case":"HY392566","date":"2015-08-22T02:43:00.000Z"},{"id":"22046","case":"HY393536","date":"2015-08-22T20:04:00.000Z"},{"id":"22047","case":"HY393931","date":"2015-08-23T04:13:00.000Z"},{"id":"22048","case":"HY394808","date":"2015-08-23T18:51:00.000Z"},{"id":"22049","case":"HY394828","date":"2015-08-23T19:30:00.000Z"},{"id":"22050","case":"HX266828","date":"2015-08-20T07:17:00.000Z"},{"id":"22051","case":"HY396147","date":"2015-08-24T18:45:00.000Z"},{"id":"22052","case":"HY397193","date":"2015-08-25T16:20:00.000Z"},{"id":"22053","case":"HY395938","date":"2015-08-25T16:53:00.000Z"},{"id":"22054","case":"HY397524","date":"2015-08-25T20:57:00.000Z"},{"id":"22055","case":"HY398643","date":"2015-08-26T18:30:00.000Z"},{"id":"22056","case":"HY397947","date":"2015-08-26T09:37:00.000Z"},{"id":"22057","case":"HY397947","date":"2015-08-26T12:07:00.000Z"},{"id":"22059","case":"HY401623","date":"2015-08-29T02:07:00.000Z"},{"id":"22060","case":"HY402811","date":"2015-08-30T00:05:00.000Z"},{"id":"22061","case":"HY402725","date":"2015-08-30T01:15:00.000Z"},{"id":"22062","case":"HY404385","date":"2015-08-31T09:00:00.000Z"},{"id":"22063","case":"HY405177","date":"2015-08-31T19:04:00.000Z"},{"id":"22064","case":"HY405238","date":"2015-08-31T20:21:00.000Z"},{"id":"22065","case":"HY406264","date":"2015-09-01T19:55:00.000Z"},{"id":"22066","case":"HY406754","date":"2015-09-01T23:00:00.000Z"},{"id":"22067","case":"HY406781","date":"2015-09-01T23:45:00.000Z"},{"id":"22068","case":"HY406845","date":"2015-09-02T00:41:00.000Z"},{"id":"22069","case":"HY406845","date":"2015-09-02T00:55:00.000Z"},{"id":"22070","case":"HY407022","date":"2015-09-02T07:40:00.000Z"},{"id":"22071","case":"HY407978","date":"2015-09-02T19:22:00.000Z"},{"id":"22072","case":"HY402928","date":"2015-09-02T10:04:00.000Z"},{"id":"22073","case":"HY408008","date":"2015-09-02T20:33:00.000Z"},{"id":"22074","case":"HY407689","date":"2015-09-02T16:03:00.000Z"},{"id":"22075","case":"HY408120","date":"2015-09-02T21:50:00.000Z"},{"id":"22077","case":"HY408225","date":"2015-09-03T03:35:00.000Z"},{"id":"22078","case":"HY410760","date":"2015-09-04T20:35:00.000Z"},{"id":"22080","case":"HY410903","date":"2015-09-05T02:39:00.000Z"},{"id":"22081","case":"HY410924","date":"2015-09-04T22:21:00.000Z"},{"id":"22082","case":"HY412263","date":"2015-09-06T00:29:00.000Z"},{"id":"22083","case":"HY412330","date":"2015-09-06T01:02:00.000Z"},{"id":"22085","case":"HY414436","date":"2015-09-07T18:26:00.000Z"},{"id":"22090","case":"HY317118","date":"2015-06-26T05:00:00.000Z"},{"id":"22086","case":"HY413844","date":"2015-09-07T10:16:00.000Z"},{"id":"22087","case":"HY414739","date":"2015-09-08T03:10:00.000Z"},{"id":"22088","case":"HY416191","date":"2015-09-09T04:20:00.000Z"},{"id":"22089","case":"HY418059","date":"2015-09-10T13:20:00.000Z"},{"id":"22091","case":"HY422047","date":"2015-09-13T17:48:00.000Z"},{"id":"22092","case":"HY422170","date":"2015-09-13T22:30:00.000Z"},{"id":"22094","case":"HY422267","date":"2015-09-14T00:11:00.000Z"},{"id":"22095","case":"HY423657","date":"2015-09-14T21:04:00.000Z"},{"id":"22096","case":"HY422355","date":"2015-09-13T22:43:00.000Z"},{"id":"22097","case":"HY423835","date":"2015-09-15T02:48:00.000Z"},{"id":"22098","case":"HY426270","date":"2015-09-16T20:25:00.000Z"},{"id":"22099","case":"HY425242","date":"2015-09-16T06:00:00.000Z"},{"id":"22100","case":"HY400038","date":"2015-08-28T19:20:00.000Z"},{"id":"22101","case":"HY427585","date":"2015-09-17T22:05:00.000Z"},{"id":"22102","case":"HY429510","date":"2015-09-19T08:55:00.000Z"},{"id":"22103","case":"HY430052","date":"2015-09-19T16:47:00.000Z"},{"id":"22104","case":"HY430167","date":"2015-09-19T18:01:00.000Z"},{"id":"22105","case":"HY430656","date":"2015-09-20T05:04:00.000Z"},{"id":"22106","case":"HY430544","date":"2015-09-20T02:28:00.000Z"},{"id":"22107","case":"HY430817","date":"2015-09-20T09:05:00.000Z"},{"id":"22108","case":"HY431514","date":"2015-09-20T19:16:00.000Z"},{"id":"22109","case":"HY430209","date":"2015-09-20T20:06:00.000Z"},{"id":"22110","case":"HY431578","date":"2015-09-20T20:36:00.000Z"},{"id":"22111","case":"HY432757","date":"2015-09-21T17:12:00.000Z"},{"id":"22112","case":"HY433852","date":"2015-09-22T14:19:00.000Z"},{"id":"22113","case":"HY435847","date":"2015-09-23T22:06:00.000Z"},{"id":"22114","case":"HY429076","date":"2015-09-23T16:52:00.000Z"},{"id":"22115","case":"HY436629","date":"2015-09-24T14:13:00.000Z"},{"id":"22116","case":"HY437443","date":"2015-09-25T07:55:00.000Z"},{"id":"22117","case":"HY439020","date":"2015-09-26T10:45:00.000Z"},{"id":"22118","case":"HX354510","date":"2015-05-11T04:45:00.000Z"},{"id":"22119","case":"HY439900","date":"2015-09-27T03:53:00.000Z"},{"id":"22120","case":"HY440415","date":"2015-09-27T12:42:00.000Z"},{"id":"22121","case":"HY439941","date":"2015-09-27T13:19:00.000Z"},{"id":"22122","case":"HY442160","date":"2015-09-28T18:10:00.000Z"},{"id":"22123","case":"HY442160","date":"2015-09-28T18:08:00.000Z"},{"id":"22124","case":"HY441412","date":"2015-09-28T09:17:00.000Z"},{"id":"22125","case":"HY442430","date":"2015-09-28T23:45:00.000Z"},{"id":"22126","case":"HY442430","date":"2015-09-28T23:05:00.000Z"},{"id":"22127","case":"HY442430","date":"2015-09-29T01:35:00.000Z"},{"id":"22128","case":"HY443182","date":"2015-09-29T12:56:00.000Z"},{"id":"22129","case":"HY444358","date":"2015-09-30T12:12:00.000Z"},{"id":"22130","case":"HY444338","date":"2015-09-30T13:10:00.000Z"},{"id":"22131","case":"HY445645","date":"2015-10-01T20:09:00.000Z"},{"id":"22132","case":"HR679297","date":"2015-10-01T18:35:00.000Z"},{"id":"22133","case":"HY449587","date":"2015-10-04T18:18:00.000Z"},{"id":"22134","case":"HY451886","date":"2015-10-06T18:46:00.000Z"},{"id":"22136","case":"HY453219","date":"2015-10-07T15:18:00.000Z"},{"id":"22137","case":"HY454710","date":"2015-10-08T18:52:00.000Z"},{"id":"22138","case":"HY455431","date":"2015-10-09T11:25:00.000Z"},{"id":"22139","case":"HY456343","date":"2015-10-10T01:20:00.000Z"},{"id":"22140","case":"HY456368","date":"2015-10-10T02:12:00.000Z"},{"id":"22141","case":"HY448756","date":"2015-10-06T16:19:00.000Z"},{"id":"22142","case":"HY457542","date":"2015-10-11T03:30:00.000Z"},{"id":"22143","case":"HY458595","date":"2015-10-12T01:05:00.000Z"},{"id":"22144","case":"HY460909","date":"2015-10-13T19:50:00.000Z"},{"id":"22146","case":"HY461959","date":"2015-10-14T15:43:00.000Z"},{"id":"22147","case":"HY462383","date":"2015-10-14T21:28:00.000Z"},{"id":"22148","case":"HY463786","date":"2015-10-15T23:35:00.000Z"},{"id":"22149","case":"HY463892","date":"2015-10-16T06:12:00.000Z"},{"id":"22150","case":"HY466381","date":"2015-10-18T00:07:00.000Z"},{"id":"22151","case":"HY466977","date":"2015-10-18T14:26:00.000Z"},{"id":"22152","case":"HY468621","date":"2015-10-19T19:27:00.000Z"},{"id":"22153","case":"HY473963","date":"2015-10-23T19:27:00.000Z"},{"id":"22154","case":"HY474220","date":"2015-10-23T22:58:00.000Z"},{"id":"22155","case":"HY473471","date":"2015-10-24T01:21:00.000Z"},{"id":"22157","case":"HY474981","date":"2015-10-24T15:40:00.000Z"},{"id":"22158","case":"HY475493","date":"2015-10-25T00:46:00.000Z"},{"id":"22159","case":"HY476639","date":"2015-10-26T02:03:00.000Z"},{"id":"22160","case":"HY476607","date":"2015-10-26T00:55:00.000Z"},{"id":"22161","case":"HY480705","date":"2015-10-30T13:14:00.000Z"},{"id":"22162","case":"HY310631","date":"2015-10-18T22:01:00.000Z"},{"id":"22163","case":"HY483064","date":"2015-10-31T00:11:00.000Z"},{"id":"22164","case":"HY484627","date":"2015-11-01T10:33:00.000Z"},{"id":"22165","case":"HY486445","date":"2015-11-02T15:15:00.000Z"},{"id":"22166","case":"HY486607","date":"2015-11-02T17:21:00.000Z"},{"id":"22167","case":"HY487514","date":"2015-11-03T12:36:00.000Z"},{"id":"22168","case":"HY487916","date":"2015-11-03T18:28:00.000Z"},{"id":"22169","case":"HY490839","date":"2015-11-05T19:42:00.000Z"},{"id":"22170","case":"HY492138","date":"2015-11-06T23:22:00.000Z"},{"id":"22171","case":"HY492469","date":"2015-11-07T02:24:00.000Z"},{"id":"22172","case":"HY493451","date":"2015-11-07T20:31:00.000Z"},{"id":"22173","case":"HY493495","date":"2015-11-07T22:22:00.000Z"},{"id":"22174","case":"HY495347","date":"2015-11-09T13:25:00.000Z"},{"id":"22175","case":"HY497309","date":"2015-11-11T06:00:00.000Z"},{"id":"22176","case":"HY498291","date":"2015-11-11T21:36:00.000Z"},{"id":"22177","case":"HY498323","date":"2015-11-11T23:57:00.000Z"},{"id":"22178","case":"HY498680","date":"2015-11-12T10:10:00.000Z"},{"id":"22179","case":"HY501231","date":"2015-11-14T12:04:00.000Z"},{"id":"22180","case":"HY505611","date":"2015-11-17T23:37:00.000Z"},{"id":"22183","case":"HY509513","date":"2015-11-21T00:37:00.000Z"},{"id":"22184","case":"HY510470","date":"2015-11-21T19:31:00.000Z"},{"id":"22185","case":"HY511115","date":"2015-11-22T16:28:00.000Z"},{"id":"22186","case":"HY511394","date":"2015-11-22T19:34:00.000Z"},{"id":"22187","case":"HY511439","date":"2015-11-22T20:18:00.000Z"},{"id":"22188","case":"HY512586","date":"2015-11-23T17:53:00.000Z"},{"id":"22189","case":"HY514161","date":"2015-11-25T01:56:00.000Z"},{"id":"22190","case":"HY515241","date":"2015-11-25T23:06:00.000Z"},{"id":"22191","case":"HY515665","date":"2015-11-26T13:29:00.000Z"},{"id":"22192","case":"HY516152","date":"2015-11-27T04:00:00.000Z"},{"id":"22193","case":"HY516538","date":"2015-11-27T12:58:00.000Z"},{"id":"22194","case":"HY517759","date":"2015-11-28T16:45:00.000Z"},{"id":"22195","case":"HY517997","date":"2015-11-28T20:18:00.000Z"},{"id":"22196","case":"HY518079","date":"2015-11-28T23:17:00.000Z"},{"id":"22197","case":"HY518110","date":"2015-11-29T01:15:00.000Z"},{"id":"22198","case":"HY518961","date":"2015-11-29T19:16:00.000Z"},{"id":"22200","case":"HY520411","date":"2015-12-01T00:52:00.000Z"},{"id":"22201","case":"HY519962","date":"2015-12-01T17:43:00.000Z"},{"id":"22202","case":"HY522926","date":"2015-12-03T04:53:00.000Z"},{"id":"22203","case":"G032677","date":"2015-05-29T22:00:00.000Z"},{"id":"22204","case":"HY518381","date":"2015-11-29T08:17:00.000Z"},{"id":"22205","case":"HY223326","date":"2015-04-15T15:50:00.000Z"},{"id":"22206","case":"HY524769","date":"2015-12-04T15:24:00.000Z"},{"id":"22207","case":"HY525017","date":"2015-12-04T18:48:00.000Z"},{"id":"22208","case":"HY525517","date":"2015-12-05T06:06:00.000Z"},{"id":"22209","case":"HY526691","date":"2015-12-06T06:11:00.000Z"},{"id":"22212","case":"HY175983","date":"2015-03-08T02:00:00.000Z"},{"id":"22213","case":"HY175983","date":"2015-03-21T23:00:00.000Z"},{"id":"22214","case":"HY528984","date":"2015-12-09T14:44:00.000Z"},{"id":"22215","case":"HY405070","date":"2015-09-14T21:33:00.000Z"},{"id":"22216","case":"HY402004","date":"2015-08-29T07:42:00.000Z"},{"id":"22217","case":"HY402004","date":"2015-08-29T07:42:00.000Z"},{"id":"22218","case":"HY533782","date":"2015-12-11T21:48:00.000Z"},{"id":"22219","case":"HY535398","date":"2015-12-13T09:41:00.000Z"},{"id":"22220","case":"HV565069","date":"2015-09-25T22:00:00.000Z"},{"id":"22221","case":"HY378628","date":"2015-08-10T22:01:00.000Z"},{"id":"22222","case":"HY538907","date":"2015-12-16T03:45:00.000Z"},{"id":"22223","case":"HY539340","date":"2015-12-16T23:42:00.000Z"},{"id":"22224","case":"HY540283","date":"2015-12-17T08:43:00.000Z"},{"id":"22225","case":"HY540904","date":"2015-12-17T16:15:00.000Z"},{"id":"22226","case":"HY540982","date":"2015-12-17T16:53:00.000Z"},{"id":"22227","case":"HY543765","date":"2015-12-20T05:42:00.000Z"},{"id":"22228","case":"HY543781","date":"2015-12-20T05:52:00.000Z"},{"id":"22229","case":"HY544303","date":"2015-12-20T23:35:00.000Z"},{"id":"22230","case":"HY543741","date":"2015-12-21T14:19:00.000Z"},{"id":"22231","case":"HY547693","date":"2015-12-23T13:30:00.000Z"},{"id":"22232","case":"HY548051","date":"2015-12-23T17:35:00.000Z"},{"id":"22234","case":"HY549155","date":"2015-12-24T15:50:00.000Z"},{"id":"22236","case":"HY549737","date":"2015-12-25T11:24:00.000Z"},{"id":"22237","case":"HY550929","date":"2015-12-26T18:47:00.000Z"},{"id":"22238","case":"HY551081","date":"2015-12-26T21:40:00.000Z"},{"id":"22239","case":"HY551250","date":"2015-12-27T01:16:00.000Z"},{"id":"22240","case":"HY551250","date":"2015-12-27T05:05:00.000Z"},{"id":"22242","case":"HY287885","date":"2015-06-08T14:45:00.000Z"},{"id":"22243","case":"HY554270","date":"2015-12-29T21:39:00.000Z"},{"id":"22244","case":"HY550751","date":"2015-12-27T23:01:00.000Z"},{"id":"22248","case":"HY533967","date":"2015-12-15T01:48:00.000Z"},{"id":"22257","case":"HY388410","date":"2015-08-18T23:39:00.000Z"},{"id":"22258","case":"HY487374","date":"2015-11-03T10:19:00.000Z"},{"id":"22265","case":"HY505905","date":"2015-11-18T08:36:00.000Z"},{"id":"21981","case":"F218264","date":"2015-07-10T23:45:00.000Z"},{"id":"22235","case":"HY549247","date":"2015-12-24T18:09:00.000Z"},{"id":"10222837","case":"HY409243","date":"2015-09-03T17:28:12.000Z"},{"id":"22182","case":"HY509229","date":"2015-11-20T20:08:00.000Z"}]';

var D3Factory = function(){
	function loadD3(type){
		var path = './' + type + '.js';
		if(require.cache[require.resolve(path)])
			delete require.cache[require.resolve(path)]
		return require(path)
	}
	return function(data, callback, type, settings) {
		var chart = loadD3(type || "bar");
		jsdom.env({
			html:'<html><head></head><body><style>' + chart.css + '</style></body>',
			features:{ QuerySelector:true }, //you need query selector for D3 to work
			done:function(errors, window){
				settings = settings ||  {
											margin : {top: 10, right: 30, bottom: 30, left: 30},
											width: 960,
											height: 500
										};
				var wind3 = d3.select(window.document);
				data = (data || { values: JSON.parse(demoData), columns:[]});
				
				// Add graph
				chart.build(wind3, data, settings); //get d3 into the dom
				
				// Build table
				var table = wind3.select("body")
					.append("table");
				var header = table.append("th");
				var keys = Object.keys(data.values[0]).map(function(key){ 
					header.append("td").html(key);
					return key;
				});
				data.values.map(function(o){
					var tr = table.append("tr");
					keys.map(function(key){
						tr.append("td").html(o[key]);
					});
				});
				// Get results
				var res = wind3.select("body").html();
				callback(res);
			},
			error: function(err){
				callback(err);
			}
		});
	}
}

module.exports = D3Factory;